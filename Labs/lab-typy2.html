<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>
<body>
<h1 id="klasy">Klasy</h1>
<p>Uzupełnij brakujące definicje:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">class</span> <span class="dt">Fluffy</span> f <span class="kw">where</span>
<span class="ot">  furry ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> f a <span class="ot">-&gt;</span> f b

<span class="co">-- Exercise 1</span>
<span class="co">-- Relative Difficulty: 1</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> [] <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 2</span>
<span class="co">-- Relative Difficulty: 1</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> <span class="dt">Maybe</span> <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 3</span>
<span class="co">-- Relative Difficulty: 5</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> ((<span class="ot">-&gt;</span>) t) <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="kw">newtype</span> <span class="dt">EitherLeft</span> b a <span class="fu">=</span> <span class="dt">EitherLeft</span> (<span class="dt">Either</span> a b)
<span class="kw">newtype</span> <span class="dt">EitherRight</span> a b <span class="fu">=</span> <span class="dt">EitherRight</span> (<span class="dt">Either</span> a b)

<span class="co">-- Exercise 4</span>
<span class="co">-- Relative Difficulty: 5</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> (<span class="dt">EitherLeft</span> t) <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 5</span>
<span class="co">-- Relative Difficulty: 5</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> (<span class="dt">EitherRight</span> t) <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="kw">class</span> <span class="dt">Misty</span> m <span class="kw">where</span>
<span class="ot">  banana ::</span> (a <span class="ot">-&gt;</span> m b) <span class="ot">-&gt;</span> m a <span class="ot">-&gt;</span> m b
<span class="ot">  unicorn ::</span> a <span class="ot">-&gt;</span> m a
  <span class="co">-- Exercise 6</span>
  <span class="co">-- Relative Difficulty: 3</span>
  <span class="co">-- (use banana and/or unicorn)</span>
<span class="ot">  furry&#39; ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> m a <span class="ot">-&gt;</span> m b
  furry&#39; <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 7</span>
<span class="co">-- Relative Difficulty: 2</span>
<span class="kw">instance</span> <span class="dt">Misty</span> [] <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 8</span>
<span class="co">-- Relative Difficulty: 2</span>
<span class="kw">instance</span> <span class="dt">Misty</span> <span class="dt">Maybe</span> <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 9</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="kw">instance</span> <span class="dt">Misty</span> ((<span class="ot">-&gt;</span>) t) <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 10</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="kw">instance</span> <span class="dt">Misty</span> (<span class="dt">EitherLeft</span> t) <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 11</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="kw">instance</span> <span class="dt">Misty</span> (<span class="dt">EitherRight</span> t) <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 12</span>
<span class="co">-- Relative Difficulty: 3</span>
<span class="ot">jellybean ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> m (m a) <span class="ot">-&gt;</span> m a
jellybean <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 13</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="ot">apple ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> m a <span class="ot">-&gt;</span> m (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> m b
apple <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 14</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="ot">moppy ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> m b) <span class="ot">-&gt;</span> m [b]
moppy <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 15</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="co">-- (bonus: use moppy)</span>
<span class="ot">sausage ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> [m a] <span class="ot">-&gt;</span> m [a]
sausage <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 16</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="co">-- (bonus: use apple + furry&#39;)</span>
<span class="ot">banana2 ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> m a <span class="ot">-&gt;</span> m b <span class="ot">-&gt;</span> m c
banana2 <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 17</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="co">-- (bonus: use apple + banana2)</span>
<span class="ot">banana3 ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c <span class="ot">-&gt;</span> d) <span class="ot">-&gt;</span> m a <span class="ot">-&gt;</span> m b <span class="ot">-&gt;</span> m c <span class="ot">-&gt;</span> m d
banana3 <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 18</span>
<span class="co">-- Relative Difficulty: 6</span>
<span class="co">-- (bonus: use apple + banana3)</span>
<span class="ot">banana4 ::</span> (<span class="dt">Misty</span> m) <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c <span class="ot">-&gt;</span> d <span class="ot">-&gt;</span> e) <span class="ot">-&gt;</span> m a <span class="ot">-&gt;</span> m b <span class="ot">-&gt;</span> m c <span class="ot">-&gt;</span> m d <span class="ot">-&gt;</span> m e
banana4 <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="kw">newtype</span> <span class="dt">State</span> s a <span class="fu">=</span> <span class="dt">State</span> {
<span class="ot">  state ::</span> (s <span class="ot">-&gt;</span> (s, a))
}

<span class="co">-- Exercise 19</span>
<span class="co">-- Relative Difficulty: 9</span>
<span class="kw">instance</span> <span class="dt">Fluffy</span> (<span class="dt">State</span> s) <span class="kw">where</span>
  furry <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>

<span class="co">-- Exercise 20</span>
<span class="co">-- Relative Difficulty: 10</span>
<span class="kw">instance</span> <span class="dt">Misty</span> (<span class="dt">State</span> s) <span class="kw">where</span>
  banana <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span>
  unicorn <span class="fu">=</span> <span class="fu">error</span> <span class="st">&quot;todo&quot;</span></code></pre>
<p>źródło:</p>
<p>http://blog.tmorris.net/20-intermediate-haskell-exercises/</p>
<h1 id="klasy-wieloparametrowe">Klasy wieloparametrowe</h1>
<p>Rozważmy klasę Iso z wykładu:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">{-#LANGUAGE MultiParamTypeClasses, FlexibleInstances #-}</span>
<span class="kw">class</span> <span class="dt">Iso</span> a b <span class="kw">where</span>
<span class="ot">  iso ::</span> a <span class="ot">-&gt;</span> b
<span class="ot">  osi ::</span> b <span class="ot">-&gt;</span> a

<span class="kw">instance</span> <span class="dt">Iso</span> a a <span class="kw">where</span>
  iso <span class="fu">=</span> <span class="fu">id</span>
  osi <span class="fu">=</span> <span class="fu">id</span>

<span class="kw">instance</span> <span class="dt">Iso</span> ((a,b)<span class="ot">-&gt;</span>c) (a<span class="ot">-&gt;</span>b<span class="ot">-&gt;</span>c) <span class="kw">where</span>
  iso <span class="fu">=</span> <span class="fu">curry</span>
  osi <span class="fu">=</span> <span class="fu">uncurry</span>

<span class="kw">instance</span> (<span class="dt">Iso</span> a b) <span class="ot">=&gt;</span> <span class="dt">Iso</span> [a] [b] <span class="kw">where</span>
 iso <span class="fu">=</span> <span class="fu">map</span> iso
 osi <span class="fu">=</span> <span class="fu">map</span> osi</code></pre>
<ul>
<li><p>Uwaga: w ostatnim przykładzie <code>iso</code> ma inny typ po lewej, inny po prawej</p></li>
<li><p>Ćwiczenie: napisz jeszcze jakieś instancje klasy <code>Iso</code></p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">instance</span> (<span class="kw">Functor</span> f, <span class="dt">Iso</span> a b) <span class="ot">=&gt;</span> <span class="dt">Iso</span> (f a) (f b) <span class="kw">where</span> <span class="fu">...</span>
<span class="kw">instance</span> <span class="dt">Iso</span> (a<span class="ot">-&gt;</span>b<span class="ot">-&gt;</span>c) (b<span class="ot">-&gt;</span>a<span class="ot">-&gt;</span>c) <span class="kw">where</span> <span class="fu">...</span>
<span class="kw">instance</span> (<span class="kw">Monad</span> m, <span class="dt">Iso</span> a b) <span class="ot">=&gt;</span> <span class="dt">Iso</span> (m a) (m b) <span class="kw">where</span> <span class="fu">...</span></code></pre></li>
</ul>
<h1 id="klasy-konstruktorowe">Klasy konstruktorowe</h1>
<p>Na listach mamy</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">foldr</span><span class="ot"> ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> b</code></pre>
<p>możemy to uogólnić na inne konstruktory typów:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import</span> <span class="dt">Prelude</span> <span class="kw">hiding</span>(<span class="fu">foldr</span>)
<span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Prelude</span>

<span class="kw">class</span> <span class="kw">Foldable</span> t <span class="kw">where</span>
<span class="ot">   foldr ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> b</code></pre>
<p>(tu uproszcozne, patrz Data.Foldable)</p>
<p><strong>Ćwiczenie:</strong> napisz instancje</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">Foldable</span> []  
<span class="kw">Foldable</span> <span class="dt">Maybe</span>   
<span class="kw">Ix</span> i <span class="ot">=&gt;</span> <span class="kw">Foldable</span> (<span class="dt">Array</span> i)</code></pre>
<p>(gdzie Array to tablice z pierwszego labu).</p>
<p>Można także zdefiniowac inne metody Foldable:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- | Map each element of the structure to a monoid,</span>
<span class="co">-- and combine the results.</span>
<span class="ot">foldMap ::</span> (<span class="dt">Monoid</span> m) <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> m) <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> m

<span class="fu">foldl</span><span class="ot"> ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> a) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> t b <span class="ot">-&gt;</span> a</code></pre>
<p>oraz funkcje</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- | The concatenation of all the elements of a container of lists.</span>
<span class="fu">concat</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> t [a] <span class="ot">-&gt;</span> [a]
<span class="fu">concat</span> <span class="fu">=</span> fold

<span class="co">-- | Map a function over all the elements of a container and concatenate</span>
<span class="co">-- the resulting lists.</span>
<span class="fu">concatMap</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> [b]) <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> [b]

<span class="co">-- | &#39;and&#39; returns the conjunction of a container of Bools.  For the</span>
<span class="co">-- result to be &#39;True&#39;, the container must be finite; &#39;False&#39;, however,</span>
<span class="co">-- results from a &#39;False&#39; value finitely far from the left end.</span>
<span class="fu">and</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> t <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>

<span class="co">-- | &#39;or&#39; returns the disjunction of a container of Bools.  For the</span>
<span class="co">-- result to be &#39;False&#39;, the container must be finite; &#39;True&#39;, however,</span>
<span class="co">-- results from a &#39;True&#39; value finitely far from the left end.</span>
<span class="fu">or</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> t <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>

<span class="co">-- | Determines whether any element of the structure satisfies the predicate.</span>
<span class="fu">any</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>

<span class="co">-- | Determines whether all elements of the structure satisfy the predicate.</span>
<span class="fu">all</span><span class="ot"> ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>

<span class="co">-- | The &#39;sum&#39; function computes the sum of the numbers of a structure.</span>
<span class="fu">sum</span><span class="ot"> ::</span> (<span class="kw">Foldable</span> t, <span class="kw">Num</span> a) <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> a

<span class="co">-- | The largest element of a non-empty structure.</span>
<span class="fu">maximum</span><span class="ot"> ::</span> (<span class="kw">Foldable</span> t, <span class="kw">Ord</span> a) <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> a

<span class="co">-- | Does the element occur in the structure?</span>
<span class="fu">elem</span><span class="ot"> ::</span> (<span class="kw">Foldable</span> t, <span class="kw">Eq</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>

<span class="co">-- | The &#39;find&#39; function takes a predicate and a structure and returns</span>
<span class="co">-- the leftmost element of the structure matching the predicate, or</span>
<span class="co">-- &#39;Nothing&#39; if there is no such element.</span>
<span class="ot">find ::</span> <span class="kw">Foldable</span> t <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Maybe</span> a</code></pre>
</body>
</html>
